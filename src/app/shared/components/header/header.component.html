<ng-container *ngIf="{
  cart: cart$ | async,
  breadcrumb: breadcrumbs$ | async
} as headerDetails">
  <mat-toolbar class="fixed-top z-3 mat-elevation-z8 border-bottom-honolulu-blue">
    <mat-toolbar-row class="h-80">
      <button mat-icon-button
              color="primary"
              class="me-2 d-lg-none"
              (click)="toggleMenu()">
        <mat-icon>menu</mat-icon>
      </button>
      <app-logo-icon></app-logo-icon>
      <button mat-button
              routerLink="/home"
              routerLinkActive="text-color-honolulu-blue"
              class="text-uppercase text-color-cadet fs-1-25rem fw-700 ms-4 d-none d-lg-block">
        Acasa
      </button>
      <button mat-button
              routerLink="/products"
              routerLinkActive="text-color-honolulu-blue"
              class="text-uppercase text-color-cadet fs-1-25rem fw-700 mx-3 d-none d-lg-block">
        Anvelope
      </button>
      <button mat-button
              routerLink="/contact"
              routerLinkActive="text-color-honolulu-blue"
              class="text-uppercase text-color-cadet fs-1-25rem fw-700 d-none d-lg-block">
        Contact
      </button>
      <span class="navbar-spacer"></span>
      <button mat-icon-button
              color="primary">
        <mat-icon>account_circle</mat-icon>
      </button>
      <button mat-icon-button
              color="primary"
              [ngbPopover]="popContent"
              [popoverTitle]="popTitle"
              [autoClose]="'outside'"
              container="body">
        <mat-icon [matBadge]="headerDetails.cart?.length"
                  matBadgeColor="accent">shopping_cart</mat-icon>
      </button>
      <ng-template #popTitle>
        <span class="text-uppercase">Cosul meu</span>
      </ng-template>
      <ng-template #popContent>
        <div class="row justify-content-center">
          <div *ngFor="let cart of headerDetails.cart"
               class="col-12">
            <div class="row align-items-center no-gutters mb-3">
              <div class="col-2">
                <img [src]="cart.product.pictureSrc"
                     class="rounded img-fluid"
                     [alt]="cart.product.name" />
              </div>
              <div class="col-8 ps-2">
                <div matListItemTitle>
                  {{cart.product.name}}
                </div>
                <div matListItemLine
                     class="fw-700 text-color-honolulu-blue mt-n2">
                  <span>{{ (cart.product.price * cart.quantity) | currency: false: cart.product.discount }}</span>
                  <span class="align-text-top fs-65-percentage">lei</span>
                  <span class="text-color-cadet fw-500"> x {{cart.quantity}}</span>
                </div>
              </div>
              <div class="col-2">
                <button mat-icon-button
                        color="primary"
                        class="d-flex"
                        (click)="removeFromCart(cart.product)">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
            </div>
          </div>
          <div class="col-10 my-3">
            <mat-divider></mat-divider>
          </div>
          <div class="col-6">TOTAL: {{ (headerDetails.cart || [] | countTotalProducts)}} produse</div>
          <div class="col-6 text-end">
            <div class="fw-700 text-color-honolulu-blue">
              <span>
                {{ headerDetails.cart || [] | countTotalPrice | currency }}
              </span>
              <span class="align-text-top fs-65-percentage">lei</span>
            </div>
          </div>
          <div class="col-10 my-3">
            <mat-divider></mat-divider>
          </div>
          <div class="col-6">
            <button mat-stroked-button
                    color="primary">Vezi cosul</button>
          </div>
          <div class="col-6">
            <button mat-stroked-button
                    color="accent">Plateste</button>
          </div>
        </div>
      </ng-template>
    </mat-toolbar-row>
  </mat-toolbar>
  <mat-toolbar *ngIf="headerDetails.breadcrumb && headerDetails.breadcrumb.length > 0"
               color="primary">
    <mat-toolbar-row class="h-160 align-items-end">
      <span class="mb-1">
        <app-breadcrumb></app-breadcrumb>
      </span>
    </mat-toolbar-row>
  </mat-toolbar>
</ng-container>